import gmsh
import sys

# Initialize Gmsh
gmsh.initialize()

# Set the model name
gmsh.model.add("rectangle")

# Define points for a 4x4 rectangle
width, height = 4, 4
p1 = gmsh.model.geo.addPoint(0, 0, 0)
p2 = gmsh.model.geo.addPoint(width, 0, 0)
p3 = gmsh.model.geo.addPoint(width, height, 0)
p4 = gmsh.model.geo.addPoint(0, height, 0)

# Define lines to form the rectangle
l1 = gmsh.model.geo.addLine(p1, p2)
l2 = gmsh.model.geo.addLine(p2, p3)
l3 = gmsh.model.geo.addLine(p3, p4)
l4 = gmsh.model.geo.addLine(p4, p1)

# Create a line loop and surface
ll = gmsh.model.geo.addCurveLoop([l1, l2, l3, l4])
surface = gmsh.model.geo.addPlaneSurface([ll])

# Synchronize to apply geometry changes
gmsh.model.geo.synchronize()

numDivX, numDivY = 2,2

# Set mesh parameters (e.g., element size)
gmsh.model.mesh.setTransfiniteSurface(surface, "Right", [numDivX+1, numDivY+1]) #optional if structured
